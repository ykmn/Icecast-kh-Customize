function InlinePlayer(){var b=this,f=this,g=navigator.userAgent.match(/msie/i);this.playableClass="inline-playable";this.excludeClass="inline-exclude";this.links=[];this.soundsByURL=[];this.indexByURL=[];this.lastSound=null;this.soundCount=0;this.usePolicyFile=!0;this.config={playNext:!1,autoPlay:!1};this.css={sDefault:"sm2_link",sLoading:"sm2_loading",sPlaying:"sm2_playing",sPaused:"sm2_paused"};this.addEventHandler="undefined"!==typeof window.addEventListener?function(a,b,d){return a.addEventListener(b,
d,!1)}:function(a,b,d){a.attachEvent("on"+b,d)};this.classContains=function(a,b){return"undefined"!=typeof a.className?a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):!1};this.addClass=function(a,c){if(!a||!c||b.classContains(a,c))return!1;a.className=(a.className?a.className+" ":"")+c};this.removeClass=function(a,c){if(!a||!c||!b.classContains(a,c))return!1;a.className=a.className.replace(new RegExp("( "+c+")|("+c+")","g"),"")};this.getSoundByURL=function(a){return"undefined"!=typeof b.soundsByURL[a]?
b.soundsByURL[a]:null};this.isChildOfNode=function(a,b){if(!a||!a.parentNode)return!1;b=b.toLowerCase();do a=a.parentNode;while(a&&a.parentNode&&a.nodeName.toLowerCase()!=b);return a.nodeName.toLowerCase()==b?a:null};this.events={play:function(){f.removeClass(this._data.oLink,this._data.className);this._data.className=f.css.sPlaying;f.addClass(this._data.oLink,this._data.className)},stop:function(){f.removeClass(this._data.oLink,this._data.className);this._data.className=""}};this.getTheDamnLink=
g?function(a){return a&&a.target?a.target:window.event.srcElement}:function(a){return a.target};this.handleClick=function(a){if("undefined"!=typeof a.button&&1<a.button)return!0;var c=b.getTheDamnLink(a);if("a"!=c.nodeName.toLowerCase()&&(c=b.isChildOfNode(c,"a"),!c))return!0;c.getAttribute("href");if(!c.href||!b.classContains(c,b.playableClass)||b.classContains(c,b.excludeClass))return!0;var d=c.href,e=b.getSoundByURL(d);e?e===b.lastSound?b.stopSound(e):(b.lastSound&&b.stopSound(b.lastSound),e.play(),
b.lastSound=e):(b.lastSound&&b.stopSound(b.lastSound),e=new Howl({src:[d],html5:!0,format:["mp3","aac","ogg"],onplay:b.events.play,onstop:b.events.stop}),e._data={oLink:c,className:b.css.sPlaying},e.id="inlineMP3Sound"+b.soundCount++,b.soundsByURL[d]=e,e.play(),b.lastSound=e);"undefined"!=typeof a&&"undefined"!=typeof a.preventDefault?a.preventDefault():event.returnValue=!1;return!1};this.stopSound=function(a){a.stop();delete b.soundsByURL[a._src];a.unload();b.lastSound&&(b.lastSound=null)};this.init=
function(){console.log("inlinePlayer.init()");for(var a=document.getElementsByTagName("a"),c=0,d=0,e=a.length;d<e;d++)b.classContains(a[d],b.playableClass)&&!b.classContains(a[d],b.excludeClass)&&(b.addClass(a[d],b.css.sDefault),b.links[c]=a[d],b.indexByURL[a[d].href]=c,c++);0<c&&(b.addEventHandler(document,"click",b.handleClick),b.config.autoPlay&&b.handleClick({target:b.links[0],preventDefault:function(){}}));console.log("inlinePlayer.init(): Found "+c+" relevant items.")};this.init()}
var inlinePlayer=null;window.onload=function(){inlinePlayer=new InlinePlayer};
